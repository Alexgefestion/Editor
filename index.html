<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>EDITOR</title>
</head>
<link rel="stylesheet" href="style/main.css">
<link rel="stylesheet" href="style/pipeMenu.css">
<link rel="stylesheet" href="style/liquidMenu.css">

<!-- блоки -->
<script src="script/classes/blocks/CommonBlock.js"></script>
<script src="script/classes/blocks/NasosElectric.js"></script>
<script src="script/classes/blocks/NasosKinetic.js"></script>
<!-- трубы -->

<!-- жидкости -->
<script src="script/classes/liquids/CommonLiquid.js"></script>

<script src="script/classes/interface.js"></script>
<body>
	<div class="main">
		<div class="leftBar">
			<div class="workSpace">
				<svg id="workSpace"
					x="0px" y="0px"
					xmlns="http://www.w3.org/2000/svg" 
					viewBox="0 0 1000 1000"
					xml:space="preserve">
					<rect id="view" x="0" y="0" width="1920" height="899" fill="#5c6e80" stroke-width="1" stroke="black"/>
					<g id="blockGroup">
					</g>
					<g id="pipeGroup">
					</g>
					<g id="valveGroup">
					</g>
				</svg>
			</div>
			<div class="info">
				<div id="workSpaceCords">0,0</div>
				<div id="scopeInfo">100%</div>
				<div id="targetInfo">#1</div>
				<div id="modeInfo">Меню блоков</div>
				<div id="liquidInfo">Вода #0</div>
			</div>
		</div>
		<div class="rightBar">
			<div class="separator"></div>
			<div class="tools">
				<div class="tool tool-act" id="tool1">
					<svg onClick="Interface.setMode(0)" width="10" height="10" viewBox="0 0 100 100">
						<path d="M47.5,2c25.09,0,45.5,20.41,45.5,45.5s-20.41,45.5-45.5,45.5S2,72.59,2,47.5,22.41,2,47.5,2M47.5,0C21.27,0,0,21.27,0,47.5s21.27,47.5,47.5,47.5,47.5-21.27,47.5-47.5S73.73,0,47.5,0h0Z"/>
						<path d="M47.5,39.5c4.41,0,8,3.59,8,8s-3.59,8-8,8-8-3.59-8-8,3.59-8,8-8M47.5,37.5c-5.52,0-10,4.48-10,10s4.48,10,10,10,10-4.48,10-10-4.48-10-10-10h0Z"/>
						<path d="M47.5,9.5c20.95,0,38,17.05,38,38s-17.05,38-38,38S9.5,68.45,9.5,47.5,26.55,9.5,47.5,9.5M47.5,7.5C25.41,7.5,7.5,25.41,7.5,47.5s17.91,40,40,40,40-17.91,40-40S69.59,7.5,47.5,7.5h0Z"/>
						<polyline points="85.5 57.5 60.5 51.5 60.5 43.5 85.5 37.5"/>
						<polyline points="57.5 9.5 51.5 34.5 43.5 34.5 37.5 9.5"/>
						<polyline points="9.5 37.5 34.5 43.5 34.5 51.5 9.5 57.5"/>
						<polyline points="37.5 85.5 43.5 60.5 51.5 60.5 57.5 85.5"/>
						<polyline points="5.5 67.5 2.5 94.5 92.5 94.5 89.5 67.5"/>
					</svg>
				</div>
				<div class="tool tool-inact" id="tool2">
					<svg onClick="Interface.setMode(10)" width="10" height="10" viewBox="0 0 100 100">
						<path d="M75.7,91.5c-1.3,1.3-3.4,1.3-4.7,0-1.3-1.3-1.3-3.4,0-4.7l15.8-15.8c1.3-1.3,3.4-1.3,4.7,0,1.3,1.3,1.3,3.4,0,4.7l-15.8,15.8"/>
						<path d="M13.2,29c-1.3,1.3-3.4,1.3-4.7,0s-1.3-3.4,0-4.7l15.8-15.8c1.3-1.3,3.4-1.3,4.7,0s1.3,3.4,0,4.7l-15.8,15.8"/>
						<rect x="38.8" y="11" width="22.3" height="78.1" transform="translate(-20.7 50) rotate(-45)"/>
					</svg>
				</div>
				<div class="tool tool-inact" id="tool3">
					<svg onClick="Interface.setMode(20)" width="10" height="10" viewBox="0 0 100 100">
						<path d="M73.23,90.78c-1.3,1.3-3.4,1.3-4.7,0-1.3-1.3-1.3-3.4,0-4.7l15.8-15.8c1.3-1.3,3.4-1.3,4.7,0,1.3,1.3,1.3,3.4,0,4.7l-15.8,15.8"/>
						<path d="M10.73,28.28c-1.3,1.3-3.4,1.3-4.7,0s-1.3-3.4,0-4.7l15.8-15.8c1.3-1.3,3.4-1.3,4.7,0s1.3,3.4,0,4.7l-15.8,15.8"/>
						<circle cx="47.53" cy="49.28" r="20"/>
						<polyline points="53.53 30.28 61.53 22.28 74.53 35.28 66.53 43.28"/>
						<line x1="51.53" y1="69.28" x2="68.53" y2="86.28"/>
						<line x1="67.53" y1="53.28" x2="84.53" y2="70.28"/>
						<line x1="43.53" y1="29.28" x2="26.53" y2="12.28"/>
						<line x1="27.53" y1="45.28" x2="10.53" y2="28.28"/>
						<line x1="65.53" y1="26.28" x2="73.53" y2="18.28"/>
						<line x1="70.53" y1="31.28" x2="78.53" y2="23.28"/>
						<path d="M90.53,29.28c1.85,1.85,3.08,3.92,2,5s-3.15-.15-5-2l-23-23c-1.85-1.85-3.16-3.84-2-5,1.23-1.23,3.15.15,5,2l23,23"/>
					</svg>
				</div>
				<div class="tool tool-inact" id="tool4">
					<svg onClick="Interface.setMode(30)" width="10" height="10" viewBox="0 0 100 100">
						<path fill="#adf" d="M75.5,65.2l-9.5,17.2s-3.2,9.5,9.5,9.5c12.7,0,9.5-9.5,9.5-9.5l-9.5-17.2Z"/>
						<path fill="#adf" d="M19.9,43.3c-1.4,1.4-2.3,3.4-2.3,5.7s.9,4.2,2.3,5.7l20,20.2c1.4,1.4,3.4,2.3,5.7,2.3,2.2,0,4.2-.9,5.7-2.3l31.3-31.3s-6-6-18.6,0-16.3,2.7-22.9,0-21.1-.2-21.1-.2Z"/>
						<path fill="none" d="M51.1,12.1l-31.2,31.2c-1.4,1.4-2.3,3.4-2.3,5.7s.9,4.2,2.3,5.7l20,20.2c1.4,1.4,3.4,2.3,5.7,2.3,2.2,0,4.2-.9,5.7-2.3l31.3-31.3L47.2,8.2c-1.4-1.4-3.4-2.3-5.7-2.3s-4.2.9-5.7,2.3l-5.9,5.9"/>
					</svg>
				</div>
			</div>
			<div class="option" id="option">
				<div id="navOption" class="nav-option">
					<!-- <div onclick="Interface.setMode(Interface.mode+1)" id="newBut" class="new but-inact">
						<svg viewBox="0 0 100 100"><line x1="50" y1="80" x2="50" y2="20"/><line x1="20" y1="50" x2="80" y2="50"/></svg>
					</div> -->
					<div id="search" class="search"><input type="text" oninput="Interface.list(this.value)" placeholder="Найти"></div>
					<div id="listAction" class="list-action">
						<div id="newBtn" class="but-act" onclick="Interface.setMode(Interface.mode+1)">Новый</div>
						<div id="editBtn" class="but-act" onclick="Interface.edit()">Изменить</div>
						<div id="delBtn" class="but-act" onclick="Interface.delete()">Удалить</div>
					</div>
				</div>
				<div id="property" class="property"></div>
			</div>
		</div>
	</div>
</body>
<script>
function init(){
	let viewPortWidth = document.querySelector(".workSpace").clientWidth;
	let viewPortHeight = document.querySelector("body").clientHeight-30;
	Interface.width = viewPortWidth;
	Interface.height = viewPortHeight;
	workSpace.setAttribute("viewBox", `${Interface.X} ${Interface.Y} ${viewPortWidth/Interface.scope*100} ${viewPortHeight/Interface.scope*100}`);
	Interface.setMode(0);
}
init();
// window.addEventListener('resize', (e) => {
// 	init();
// });
workSpace.addEventListener("mousewheel", function(e) {
    if (e.ctrlKey) {//перемещение поля по X
       e.preventDefault();
       Interface.move(e.deltaY,0);
       return false;
    }
    if (e.altKey) {
       e.preventDefault();
       Interface.scale(-e.deltaY/10)//изменение масштаба
       return false;
    }
    Interface.move(0,e.deltaY);//перемещение поля по Y
});

// document.addEventListener("click", function(e){
// 	let id = e.target.id.split("_");
// 	console.log(e.target
// 		)
// 	if(id.length == 2){
// 		Interface.setTarget(id[0],id[1]);
// 	}
// });
</script>
</html>